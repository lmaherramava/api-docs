# Массовое получение QR-кода

Метод позволяет массово получить QR-коды документов. 

**GET /getStackQrCode**

### Формат запроса

Запрос на обновление документа следует отправлять с помощью метода GET. 
```
/getStackQrCode
? [doc_ids= <идентификатор>]
& [id_type= <тип идентификатора>]
& [org_id= <идентификатор>]
```

### URL запроса 
```
http://dapi-preprod.ediweb.ru/edi/api/v1.1/getStackQrCode?id_type=gln&org_id=2359874562330&doc_ids=21966959%2C21962431
```

### Параметры запроса

| Параметр              | Описание                                                                                                                                                  | Пример значения                  | Тип данных  |
|-----------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|-------------|
| `id_type`*            | Тип идентификатора организации. Принимает значения: `gln` или `fns`                                                                                   | gln                            | string      |
| `org_id`*             | Идентификатор запроса организации-инициатора запроса                                                                                                    | 2000000009994                  | string      |
| `doc_ids`*      | Идентификаторs ЭТРН, по которым требуется получить QR-код. Идентификаторы заполняются через запятую. Ограничение на 100 значений в списке           |                   | string      |                                                    | 2019-04-02                     | date-time   |
* Обязательный параметр

### Формат ответа

Если запрос был обработан без ошибок, API отвечает кодом 200. Если запрос вызвал ошибку, возвращается подходящий код ответа, а тело ответа содержит описание ошибки.

В заголовке ответа возвращается  `request_uuid` - идентификатор корреляции запроса.
### Тело ответа

В теле ответа возвращается zip. Состав архива: 

* xml-файл описи – файл описи формируется с именем Inventory.xml внутри по каждому запрошенному документу
* zip-архивы с qr-кодами по запрошенным документам
Имя файла архива соответствует маске QR_ + номер документа+_+время.zip (пример: QR_AT-1683121162935_03052023133944.zip)

### Заголовки ответа
```
{
  "connection": "keep-alive",
  "content-disposition": "attachment; filename=StackQrCodes_RESPONSE_31082023102612.zip",
  "content-encoding": "gzip",
  "content-length": "65222",
  "content-type": "text/plain; charset=UTF-8",
  "date": "Thu, 31 Aug 2023 10:26:13 GMT",
  "file_name": "U3RhY2tRckNvZGVzX1JFU1BPTlNFXzMxMDgyMDIzMTAyNjEyLnppcA==",
  "request_uuid": "0f3b8954-0d9a-443a-8793-8530ee782918",
  "server": "nginx/1.22.0"
}
```