# Получение контента документов (пакетом)

Метод возвращает контент документов согласно идентификаторам указанным в запросе. 

**GET /stackDocuments**

### Формат запроса

Запрос списка всех файлов следует отправлять с помощью метода GET.

```
/stackDocuments
? [id_type= <тип идентификатора>]
& [org_id= <идентификатор организации>]
& [ids= <идентификаторы документов в системе>]
```

### URL запроса 
```
https://dapi-preprod.ediweb.ru/edi/api/v1.1/createDocument?id_type=gln&org_id=2000000009994&org_id_sender=2000000009994&org_id_receiver=2000000007705&document_type=WAYBILL_T1_ON_PTLSSOBTS&file_name=0402_WAYBILL_T1_ON_PTLSSOBTS.xml&doc_number=MDItMDQJ&doc_flow_type=LEGACY&doc_date=2019-04-02
```

### Параметры запроса

| Параметр              | Описание                                                                                                                                                  | Пример значения                  | Тип данных  |
|-----------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|-------------|
| `id_type`*            | Тип идентификатора организации. Принимает значения: `gln` или `fns`                                                                                   | gln                            | string      |
| `org_id`*             | Идентификатор запроса организации-инициатора запроса                                                                                                    | 2000000009994                  | string      |
| `ids`*      | Идентификаторы документов к получению. Передаются через запятую, без  пробелов. Список на 100 значений                                                                                                  | 131710906,131711346,131711368                | string      |
* Обязательный параметр

### Формат ответа

Если запрос был обработан без ошибок, API отвечает кодом 200, если запрос вызвал ошибку, возвращается подходящий код ответа, а тело ответа содержит описание ошибки.

В ответе формируется пакет документов:

* Если документ не подписан, то для результата подготавливается xml-документ.
* Если документ подписан, то формируется архив. xml+подпись/подписи размещаются в корне архива. 
* Формируется опись документов. Опись - xml-файл с метаинформацией к списку полученных документов. Имя файла Inventory.xml. XSD-схема с описанием - InventoryResponsAPI.xsd

### Тело ответа
```

<?xml version="1.0" encoding="windows-1251" standalone="yes"?><Файл ИдФайл="ON_PTLSSOBTS___2IJ92B02C5A435544C7AAA90E7FB5AC4BE2_2IJ92B02C5A435544C7AAA90E7FB5AC4BE2_0_20230908_bb68941f-cbcc-4317-93bb-c15d32faf5bd" ВерсПрог="DropCat" ВерсФорм="5.01"><Документ КНД="1110380" ДатИнфСоб="08.09.2023" ВрИнфСоб="10:59:20" ДатаПЛ="08.09.2023" ПризнНачРейс="2" УИДПЛПред="35572ddf-c967-489a-8f21-076d6ac3de96"><СодИнфСоб УИД_ПЛ="1b90628c-23d0-4b5c-a6e1-22e2edacf7f7" ОбМедОсмПосле="1" ВидПрв="КП" ВидКП="РП" ВидСообщ="Г"><МестОтпр><ГЛН>4680328247002</ГЛН><Адрес><АдрРФ Индекс="352630" КодРегион="23" Район="Белореченский р-н" Город="Белореченск" Улица="Мира ул." Дом="89"/></Адрес></МестОтпр><АдрПункт><ГЛН>4607164990558</ГЛН><Адрес><АдрРФ Индекс="352500" КодРегион="23" Район="Лабинский р-н" Город="Лабинск" Улица="Карла Маркса ул." Дом="190" Кварт="А40"/></Адрес></АдрПункт><СрокПЛ ПЛДень="1" ДатаИспПЛ="17.08.2023"/><СвЛицПЛ ЛицоОфПЛ="С"><ИдСв><СвЮЛУч НаимОрг="Поставщик УПД" ИННЮЛ="7612312312" КПП="123321123" ОГРН="2121212121212"/></ИдСв><Адрес><АдрРФ Индекс="610000" КодРегион="43" Район="Советский" Город="Советск" Улица="ул Ленина" Дом="5" Корпус="1" Кварт="12"/></Адрес><Контакт><Тлф>88008008080</Тлф><ЭлПочта>test@test.ru</ЭлПочта></Контакт></СвЛицПЛ><СвТС><ТС Тип="легковая" Марка="opel" Модель="1" РегНомер="1dd111"/></СвТС><СвВодит><ВодитУд НомВУ="123456" СерВУ="1234" ДатаВыдВУ="31.08.2023"/><ФИО Фамилия="МДК" Имя="Елена"/></СвВодит></СодИнфСоб><ПодпИнфСоб Должн="Дебитор" СпосПодтПолном="6"><ФИО Фамилия="Дебиторов" Имя="Тестовый"/></ПодпИнфСоб></Документ></Файл>
```

### Заголовки ответа
```
{
  "connection": "keep-alive",
  "content-disposition": "attachment; filename=StackDocuments_RESPONSE_20052021095139.zip",
  "content-length": "2004",
  "content-type": "text/plain; charset=UTF-8",
  "date": "Thu, 20 May 2021 09:51:51 GMT",
  "file_name": "U3RhY2tEb2N1bWVudHNfUkVTUE9OU0VfMjAwNTIwMjEwOTUxMzkuemlw",
  "request_uuid": "a7d91883-48ec-4af5-abe3-e3886c1986e2",
  "server": "nginx"
}
```