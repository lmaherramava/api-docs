# Получение QR-кода

Метод предназначен для получения архива с QR-кодом по перевозке.

**GET /getQrCode**

### Формат запроса

Метод предназначен для получения архива с QR-кодом по перевозке.
```
/getQrCode
? [doc_id= <идентификатор>]
& [id_type= <тип идентификатора>]
& [org_id=<идентификатор>]
```

### URL запроса 
```
http://dapi-preprod.ediweb.ru/edi/api/v1.1/getQrCode?id_type=gln&org_id=2359874562330&doc_id=21962431
```

### Параметры запроса

| Параметр              | Описание                                                                                                                                                  | Пример значения                  | Тип данных  |
|-----------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|-------------|
| `id_type`*            | Тип идентификатора организации. Принимает значения: `gln` или `fns`                                                                                   | gln                            | string      |
| `org_id`*             | Идентификатор запроса организации-инициатора запроса                                                                                                    | 2000000009994                  | string      |
| `doc_id`*      | Идентификатор контейнера, по которому требуется получить QR-код                                                                                        | 2000000009994                  | string      |

### Формат ответа

Если запрос был обработан без ошибок, API отвечает кодом 200. Если запрос вызвал ошибку, возвращается подходящий код ответа, а тело ответа содержит описание ошибки.

В заголовке ответа возвращается  request_uuid - идентификатор корреляции запроса.

Если для документа QR-код сформирован, то архив с ним передается в теле ответа. В составе архива будет gif с QR-кодом и отдельные кадры в формате png.

Если для документа QR-код не сформирован или перевозка уже завершена возвращается стандартный код ответа 400 с описанием ошибки.

### Тело ответа

В теле ответа возвращается zip-архив, имя файла архива соответствует маске QR_ + номер документа+_+время.zip (пример: QR_AT-1683121162935_03052023133944.zip)

### Заголовки ответа
```
{
  "connection": "keep-alive",
  "content-disposition": "attachment; filename=QR_0599_31082023104626.zip",
  "content-encoding": "gzip",
  "content-length": "32278",
  "content-type": "text/plain; charset=UTF-8",
  "date": "Thu, 31 Aug 2023 10:46:27 GMT",
  "file_name": "UVJfMDU5OV8zMTA4MjAyMzEwNDYyNi56aXA=",
  "request_uuid": "a827f01f-d9ae-4b8d-8183-928c3e3752c4",
  "server": "nginx/1.22.0"
}
```